### 动态dp

通常是将转移方程写成矩阵乘法的形式（或构造辅助dp数组使得它能写成矩阵乘法），用线段树维护矩阵乘积，在更新信息时去线段树上修改，实现dp值的动态更新。

> 一个技巧：
>
> 矩阵乘法的另一种形式：$C_{i,j}=MAX(A_{i,k}+B_{k,j})$，即把乘法换加法，累加换MAX。
>
> 这种意义下的矩阵乘法仍然满足结合律，适用于矩阵快速幂或是线段树维护。
>
> 注意这种意义下的单位矩阵不一样，为：
> $$
> \begin{bmatrix}
> 0&-\infty\\
> -\infty&0
> \end{bmatrix}
> $$
> 

> 另一个技巧：
>
> 树剖。
>
> 树上dp常用一个节点表示其子树的状态，树剖之后，我们可以另设一种状态：$g_i$ 表示 $i$ 这个子树中，不考虑重儿子时的状态。
>
> 这样设置的优势就是：在树上单点更新信息时，它的直到top为止的祖先的 $g$ 状态都不会改变，只需要更新端点即可。

[【模板】动态 DP](https://www.luogu.com.cn/problem/P4719)

