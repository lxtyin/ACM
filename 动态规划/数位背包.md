#### 数位背包

数位背包复杂度为 $n^2log_n$，主要处理这样的问题：

有一个数 $n$，可以将其表示为若干 $a\times 2^i$ 之和，每个 $a\times 2^i$ 有一定权值，问怎么划分权值最大。

可以这么想，把 $n$ 用二进制表示，然后可以将每个高位1变成低一位的两个1，这样不断向右边摊，有某种摊法使得答案最大。

状态是这样的：$f_{ij}$ 表示推到第 $i$ 位（从低位数起），第 $i$ 位上有 $j$ 个1，更低位上没有动过，此时继续往下推能得到的最优答案。

$f_{i,j} = val_{i,k}+f_{i-1,2\times (j-k)+w_{i-1}}$

$w_i$ 为第 $i$ 位原本的值。

大概这么个递推式子，从低位开始向高位推，注意高位到低位翻倍导致溢出的问题。