计算几何中，尽量不要采用除法，因为会有比较大的精度误差，计算斜率也会出现无穷等难于处理的情况。应该尽量使用向量方法，如点积，叉积等。



二维向量点积：$a\cdot b=x_1x_2+y_1y_2=|a||b|cos\theta$

二维向量叉积：$a\times b=x_1y_2-y_1x_2$，其结果应为垂直纸面的三维向量，可以用一个正负数值表示。



#### 判断线段相交

两线段 $P(a,b), Q(c,d)$，要求 $a,b$ 在 $Q$ 的两侧，且同时 $c,d$ 在 $P$ 的两侧。

点和线段之间只需要叉乘一下即可判断侧向。

注意这种方式对于共线的线段而言需要特殊考虑。

#### 判断点是否在多边形内部

##### 光线投射法

由点伸出一条射线，射线若与奇数个边相交，则在内部，否则在外部。

这条射线最好设置为无理数，以避免与多边形的点相交（此情形下失效）

##### 回转数

多边形相对于点的回转数若为0，则点在多边形外部，否则在内部。

可以将点与多边形的每个点之间都连一条线，然后按顺序考虑每两个相邻点连线的夹角和（带顺序，可为负），若和为0，则在外部。

计算这个带顺序的夹角可以总和运用点乘和叉乘。